# ch2. 리액트 필수 개념 이해

## 관련 주제

- 리액트 정적 컴포넌트
- prop이 있는 컴포넌트 만들기
- UI를 여러 컴포넌트로 나누기
- 리액트 내부 상태 관리
- 랜더링 과정 이해하기
- 많이 쓰는 리액트 훅

## 2.1 리액트 정적 컴포넌트

### 정적 컴포넌트란?<br>

상태가 없고 외부 데이터 또는 이벤트에 반응하지 않는 컴포넌트로써 단순히 prop을 전달 받아
그에 맞게 UI를 랜더링하는 컴포넌트.

```ts
const StaticArticle = () => {
  return (
    <article>
      <h3>Think in components</h3>
      <p>
        It's important to change your mindset when coding with React
      </p>
    </article>
  )
}
```

- 정적 컴포넌트란 쉽게 말해 개발자가 임의로 입력한 하드코딩된 소스코드
- 동적으로 수정되지 않을 내용들이 명확할 때는 위와 같이 코드를 짤 수 있으나 권장하지 않음

## 2.2 prop이 있는 컴포넌트 만들기

리엑트에서는 prop(속성)으로 **입력값**을 받을 수 있음.

- 부모 컴포넌트 -> 자식 컴포넌트로 prop을 통해 데이터 전달 가능
- 자식 컴포넌트는 부모로부터 받은 prop(데이터)를 다양한 형태로 정의 가능
- 이를 통해 컴포넌트의 동작과 랜더링 형태를 다양하게 할 수 있음
- 자식 컴포넌트의 재활용성이 높음
- 여러 컴포넌트 조립 가능

prop은 **자바스크립트의 객체**이며 키(key)와 값(value)으로 구성됨

- 키: prop의 이름을 의미
- 값: 이름에 대응하는 데이터

prop에는 자바스크립트에서 값으로 표현할 수 있는 원시 데이터(number, string, boolean 등)을 포함하여 함수까지 다양한 데이터 유형을 담을 수 있음.
prop을 컴포넌트에 전달하면 컴포넌트의 동작과 렌더링 제어가 가능함.

#### prop을 활용한 범용 컴포넌트 만들기

- 제목과 요약 내용이 있는 블로그 포스트 목록

```ts
type ArticleType = {heading: string, summary: string};


const Article =({heading, summary}: ArticleType) => {
  return (
    <article>
      <h3>{heading}</h3>
      <p>{summary}</p>
    </article>
  );
};

<Article
  heading = "Think in compoenets"
  summary = "It's important to change your mindset when coding with React"
/>
```

- Article 컴포넌트를 사용할 때 heading, summary 값을 컴포넌트에 전달 할 수 있음
- 위 소스코드를 실행해보면 웹 페이지상에 h3태그가 적용된 `Think in compoenets` 및 p태그가 적용된 `It's important to change your mindset when coding with React`를 볼 수 있음

prop은 리액트의 기본 개념으로, 다양한 데이터 및 요구사항을 전달하여 컴포넌트를<br> 사용자가 원하는대로 구성할 수 있음.

컴포넌트는 자바스크립트의 객체와 동일한 성격을 가지므로 속성 개수에 제한은 없으나 관리의 용이함을 위해 5~6개를 넘지 않는것을 권장함

## 2.3 UI를 여러 컴포넌트로 나누기

![alt text](image.png)

- Heading, SearchBox, Notification, WeatherList, Weather, Weather Application, 모두 각각의 컴포넌트로 분리하여 정의하고 조립하여 하나의 페이지를 구성
- 이러한 React의 컴포넌트를 분리하는 방법으로 페이지를 구성할 경우 다음과 같은 사항을 고려해야함
  - prop은 컴포넌트 사이에 데이터 전달하기에 유용하며, 반대로 데이터를 유지해야 하는 경우도 있는데, 이 때 컴포넌트 내부에서 데이터를 관리 및 업데이트 해주는 **상태**가 필요함
  - CSS 스타일을 세세하게 정의하고 HTML 구조를 정교하게 만드는것이 중요함
  - 랜더링 중 사용자의 반응성을 높이고 일관된 데이터를 보여주기 위해 **상태 관리**에도 신경 써야함

## 2.4 리액트 내부 상태 관리

### 상태란?

- 컴포넌트 내부 데이터를 보관 및 관리할 수 있음
- 컴포넌트는 상태에 정보를 저장하고 업데이트 하여 사용자와 상호작용을 하는 동적인 UI 구현이 가능함
- 리엑트가 사용자 액션에 반응하는 애플리케이션을 만드는 필수 요소임

### useState

리액트에서 컴포넌트의 **상태 관리**를 하는 대표적인 훅(hook)으로써<br>
리렌더링이 발생하더라도 상태를 유지하게 해줌

> _리엑트 훅은 16.8 버전부터 소개된 기능으로 함수형 컴포넌트에서도 상태를 관리하고
> 컴포넌트 생명 주기를 다룰 수 있음_

## 2.5 렌더링 과정 이해하기

### 랜더링이란?

prop이나 상태값 등 **컴포넌트가 참조하는 값이 변경되면** 변경 사항을 반영하기 위해 리액트는 UI를 업데이트 해야함. 이 과정을 **랜더링**이라 함

### 랜더링 과정

- **초기 렌더링:** 함수 컴포넌트가 처음 랜더링 된 이후에, 컴포넌트에 UI를 표현하는 가상의 객체를 생성하고 이 객체는 UI 요소의 구조 및 내용을 포함함
- **상태와 prop의 변화:** 컴포넌트와 prop의 상태가 변경되면 리엑트는 함수 컴포넌트를 다시 호출하여 이전 상태와 변경된 상태를 비교함
- **재조정:** 비교를 통해 변경이 필요한 UI만 업데이트함(그 외에는 업데이트 X)
- **리렌더링:** 가상 UI 요소를 업데이트하는 방식으로 리랜더링을 진행하며, 함수 실행 결과에 따라 가상 DOM을 새로운 DOM으로 바꿈
- **DOM 업데이트:** 실제 DOM에 가상 DOM의 변경사항을 적용(추가, 삭제, 요소 업데이트 등)

**리엑트의 효율적인 랜더링 방식은 불필요한 DOM 변경을 최소화하여 컴포넌트가 빠르게 랜더링 될 수 있어야 함**

## 2.6 많이 사용되는 리엑트 훅(Hook)

훅은 관심사 분리 및 로직 모듈화를 위함으로 코드의 재사용성 및 가독성을 높여주며<br> 컴포넌트를 쉽게 테스트 할 수 있음.

### 2.6.1 useState

- 예시

  - 로그인 폼에서 아이디(username), 비밀번호(password), 아이디 기억하기(remember me) 등 같은 요소가 있을 경우
  - 사용자가 아이디, 비멀번호를 입력하고 아이디 기억하기를 체크한 다음 로그인을 할 때
  - 모든 상태를 기억하고 있어야 함

  이때 useState로 각 요소들을 상태로 관리하여 사용자가 값을 입력하면 상태를 업데이트하고<br> form 데이터를 가져올 수 있음

### 2.6.2 useEffect

- **부수 효과**를 관리함
  - 렌더링과 직접적인 관련은 없지만 외부 리소스와의 상호 작용을 관리
    - 외부 API 요청
    - DOM 수정
    - 이벤트 리스터
    - 구독 및 타이머

useEffect의 핵심 기능: 정리 함수(return) 반환

- 예시
  - useEffect에서 타이머를 설정했다면 이 타이머를 해제하는 함수를 반환하는것이 좋음
  - 이를 통해 적절한 리소스 관리와 애플리케이션의 메모리 누수를 예방할 수 있음

### 2.6.3 useCallback

콜백 함수의 참조를 메모제이션(기억)하고 최적화 할 때 사용.<br>
특히, 콜백 함수를 자식 컴포넌트에 전달하거나 콜백을 다른 훅의 의존성 목록으로 지정할 때 유용함

쉽게 말해, 앞서 `useState`에서 사용자가 로그인 시 계정 정보를 입력할때 마다 상태가 변경되므로 리렌더링이 진행되는데, 이는 성능을 저하 시키는 원인이 될수 있음.

그러므로 useCallback으로 계정 정보 입력이 다 끝났을때 한번만 렌더링을 하는 역할을 `useCallback`이 담당함

### 2.6.4 리엑트 Context API

Prop Drilling을 예방할 수 있음<br>
데이터를 일일이 prop을 통해 수동으로 전달하지 않고 컴포넌트 하위 트리에 직접 전달.<br>많은 자식 컴포넌트들과 공유해야 하는 전역 데이터 또는 중간 컴포넌트들 중<br>데이터가 필요하지 않고 하위 컴포넌트에 전달만 해야 하는 경우 유용함
