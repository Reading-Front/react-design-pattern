### 단익 책임 원칙 (SRP)

- 함수, 클래스, 혹은 리액트 컴포넌트는 변경해야할 이유가 단 하나만 있어야 함을 의미

- 하나의 컴포넌트는 하나의 작업이나 기능만을 수행하는 것이 이상적

```tsx
// as-is

import React, { useState, useEffect } from "react";
import fetchPostById from "./fetchPostById";

interface PostType {
  id: string;
  title: string;
  summary: string;
}

const fetchPostById = (id: string) => {
  return new Promise((resolve, reject) => {
    setTimeout(() => resolve({}), 2000);
  });
};

const BlogPost = ({ id }: { id: string }) => {
  const [post, setPost] = useState<PostType>(EmptyBlogPost);
  const [isLiked, setIsLiked] = useState(false);

  useEffect(() => {
    fetchPostById(id).then((post) => setPost(post));
  }, [id]);
  const handleClick = () => {
    setIsLiked(!isLiked);
  };

  return (
    <div>
      <h2>{post.title}</h2>
      <p>{post.summary}</p>
      <button onClick={handleClick}>{isLiked ? "Unlike" : "Like"}</button>
    </div>
  );
};
export default BlogPost;
```

```tsx
// to-be

const fetchPostById = (id: string) => {
  return new Promise((resolve, reject) => {
    setTimeout(() => resolve({}), 2000);
  });
};

// api 호출 하는 로직 분리
const useFetchPost = (id: string): PostType => {
  const [post, setPost] = useState<PostType>(EmptyBlogPost);
  useEffect(() => {
    fetchPostById(id).then((post) => setPost(post));
  }, [id]);
  return post;
};

// 좋아요 버튼 로직 분리
const LikeButton: React.FC = () => {
  const [isLiked, setIsLiked] = useState(false);
  const handleClick = () => {
    setIsLiked(!isLiked);
  };
  return <button onClick={handleClick}>{isLiked ? "Unlike" : "Like"}</button>;
};

const BlogPost = ({ id }: { id: string }) => {
  const post = useFetchPost(id);

  return (
    <div>
      <h2>{post.title}</h2>
      <p>{post.summary}</p>
      <LikeButton />
    </div>
  );
};
```

### 중복 배제 Don’t repeat yourself (DRY) 원칙

```tsx
// as-is
type Product = {
  id: string;
  name: string;
  image: string;
  price: number;
};

const ProductList = ({
  products,
  addToCart,
}: {
  products: Product[];

  addToCart: (id: string) => void;
}) => (
  <div>
    <h2>Product List</h2>
    {products.map((product) => (
      <div key={product.id} className="product">
        <img src={product.image} alt={product.name} />
        <div>
          <h2>{product.name}</h2>
          <p>${product.price}</p>
          <button onClick={() => addToCart(product.id)}>Add to Cart</button>
        </div>
      </div>
    ))}
  </div>
);
export default ProductList;

const Cart = ({
  cartItems,
  removeFromCart,
}: {
  cartItems: Product[];
  removeFromCart: (id: string) => void;
}) => (
  <div>
    <h2>Shopping Cart</h2>
    {cartItems.map((item) => (
      <div key={item.id} className="product">
        <img alt={item.name} src={item.image} />
        <div>
          <h2>{item.name}</h2>
          <p>${item.price}</p>
          <button onClick={() => removeFromCart(item.id)}>
            Remove from Cart
          </button>
        </div>
      </div>
    ))}
  </div>
);
```

- ProductList, Cart 두 컴포넌트 모두 props로 전달받은 아이템을 map 함수를 통해서 렌더링하고 각 아이템을 클릭했을 때 실행할 수 있는 콜백 함수를 전달한다

- 중복을 줄이고 각각의 컴포넌트가 하나의 역할만 할 수 있도록 LineItem 컴포넌트를 분리

```tsx
import { Product } from "./types";

const LineItem = ({
  product,
  performAction,
  label,
}: {
  product: Product;
  performAction: (id: string) => void;
  label: string;
}) => {
  const { id, image, name, price } = product;
  return (
    <div key={id} className="product">
      <img src={image} alt={name} />
      <div>
        <h2>{name}</h2>
        <p>${price}</p>

        <button onClick={() => performAction(id)}>{label}</button>
      </div>
    </div>
  );
};
export default LineItem;
```

- 이제 재사용할 수 있는 LineItem 컴포넌트를 필요한 곳에서 불러서 사용할 수 있다

```tsx
const ProductList = ({
  products,
  addToCart,
}: {
  products: Product[];
  addToCart: (id: string) => void;
}) => (
  <div>
    <h2>Product List</h2>
    {products.map((product) => (
      <LineItem
        key={product.id}
        product={product}
        performAction={addToCart}
        label="Add to Cart"
      />
    ))}
  </div>
);

const Cart = ({
  cartItems,
  removeFromCart,
}: {
  cartItems: Product[];
  removeFromCart: (id: string) => void;
}) => (
  <div>
    <h2>Shopping Cart</h2>
    {cartItems.map((item) => (
      <LineItem
        key={item.id}
        product={item}
        performAction={removeFromCart}
        label="Remove from Cart"
      />
    ))}
  </div>
);
```
