# 5장 리액트 테스팅
## 테스트가 필요한 이유
### 회귀 방지
- 애플리케이션을 확장하면서 새로운 코드의 추가로 인해 기존에 잘 동작하던 기능을 깨트릴 수 있다.
- 이를 회귀(regression)라 부른다. 자동화된 테스트는 회귀를 잡아주는 안전망 역할을 한다.

## 여러 종류의 테스트 알아보기
소프트웨어 개발 영역에서 테스트는 여러 유형으로 분류할 수 있다.
보통 하나의 코드베이스에 단위 테스트와 통합 테스트, E2E 테스트가 있다.
### 단위 테스트
- 개별 컴포넌트나 함수의 기능을 격리하여 각각 예상대로 동작하는지를 확인한다.

### 통합 테스트
- 다른 모듈과 서비스들이 원활하게 상호작용하여 함께 잘 동작하는지를 검사한다.

### E2E 테스트
- 전체 애플리케이션의 흐름을 시작부터 종료까지 실제 사용자 행동을 묘사하여 테스트한다.
- 이를 통해 전체 시스템이 유기적으로 잘 동작하는지를 확인한다.

```md
마이크 콘이 고안한 테스트 피라미드에서는 통합 테스트나 E2E 테스트보다 단위 테스트를 더 많이 수행할 것을 권장한다고 한다.
- 단위 테스트는 빠르고 단순하며 유지하기 쉽기 때문.
```

- 하지만, 현대의 프론트 개발에서 이 모델은 점점 진화를 하고 있다.
- 이로 인해 통합 테스트와 E2E 테스트가 점점 더 중요해지고 있다.
- Cypress, Puppeteer와 같은 도구들을 이용하면 브라우저에서의 사용자 행동을 모방하여 E2E 테스트를 쉽게 작성할 수 있다고 한다.
- 또한, 리액트 테스팅 라이브러리는 컴포넌트 간의 상호작용을 쉽게 확인할 수 있도록 하여 통합 테스트를 더욱 원활하게 해준다.
- 시각적 회귀 테스트는 웹 애플리케이션의 시각적으로 나타나는 부분을 저장하고 이전 버전과 비교하는 방식이다.
  - 이러한 방식은 사용자 인터페이스의 의도하지 않은 시각적 오류와 변경 사항이 개발 도중에 발생했을 때 유용하다고 한다.
 
### 발전된 테스트 피라미드
정적 검사 > 단위 테스트 > 통합 테스트 > 시각적 회귀 테스트 > E2E 테스트


## 테스트 그룹 묶기
- Jest에서는 describe 함수를 이용하여 테스트 그룹을 묶을 수 있다.
```ts
describe('math functions', () => {
  it('adds positive numbers correctly', () => {
    expect(add(1,2)).toBe(3);
  });

  it('adds negative numbers correctly', () => {
    expect(add(-1,-2)).toBe(-3);
  });

  // 그 외 테스트 코드
}
```

## 리액트 컴포넌트 테스트
- Jest 단독으로 사용해도 좋지만, 리액트 테스팅 라이브러리와 같은 전용 라이브러리를 사용하는 것보다 코드가 번잡해질 수 있다.
- 리액트 테스팅 라이브러리는 리액트 컴포넌트 테스팅을 위한 강력한 경량 라이브러리이다.
- 근데 실질적으로 컴포넌트는 단순하지 않고 복잡함. 그래서 좀 더 포괄적인 테스팅 전략이 필요하다.

## 통합 테스트
- 테스트 피라미드에서 단위 테스트 위에 있는 통합 테스트는 여러 단위 코드들 사이의 상호작용에 대해 검증한다.
- 상호작용이란, 컴포넌트 간의 상호작용 또는 서버와 클라이언트 사이의 상호작용을 말한다.
- 통합 테스트의 목적은 시스템의 각기 다른 부분들을 통합하면서 생길 수 있는 문제들을 발견하는 것이다.
